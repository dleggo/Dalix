# Misc

## A good OS should...
1. Be usable by a 4 year old
2. Be easily managable (Apps, settings, etc)
3. Have wide package availibility
4. Have backward compatability (lots!)
5. Look nice
6. **Never** require the terminal (though it should exist)
7. Have a global menu bar
8. Handle an app existing in multiple versions
9. Be stable
10. Have understandable folder names

## Kadota will attempt to implement this in the following ways
1. Making a custom DE
2. Using AppBundles, and having simple and straight to the point settings
3. Port Linux apps, and if a user tries to install a .deb file it should automatically generate an AppBundle for it
4. FIXME
5. Mac OS like theme
6. Have a graphical tool for ***many*** config options (but not too many)
7. TODO
8. Use AppBundles
9. FIXME
10. Solved by kadotad


## When a user drags a ```.deb``` File into ```/Applications```

```kadotad``` will recognize it and extract the deb into ```tmp/*``` where ```*``` is the name and
version of the package. It will then simulate installation into a chroot. ```tmp/*/chroot``` Then it
will read the dependencies of the application, and place that in its own meta-data file alongside
other important information. It then copies ```tmp/*``` into ```/Applications/*.app``` Each of these
steps will get described in more detail

> ## **Implementation detail.**
> When ```kadotad``` converts a .deb into a AppBundle it creates ```AppRun``` point to the ```.desktop```
> file in ```/usr/share/applications/``` If there is multiple ```.desktop``` files there or if there
> are non then ```kadotad``` will display an error message saying "**Error installing app *\n Multiple
> Desktop files exist. This functionality is planned to be implemented in the future. Sorry for the
> inconvenience.**"

### To recognize the .deb
```kadotad``` will use ```watchdog``` to moniter  the directory and will display a message informing
the user that the app will be converted so it can be used.

###


## Developer information

### Metadata file
```toml
# ./pkg-info.toml

# Neccesary fields
[pkg]

name = "Your Package Name"
version = 4.5.6.7
developer = "You/Your company's name"
discription = '''
A description which can span
multiple lines.
'''

dependencies = '''
libsqsh==1.2.3
python>=3.10
joy
happiness
love
etc.
'''

# items under optional are not neccesarry but nice additions
[optional]
# This will be false if this is an autogenerated app from a .deb file
kadota_app = true

# For use in automated scripts so there only has to be one meta-data file
[other]
```

### App Bundle Structure
For an example package called abcd
```
/Applications/abcd***VERSION/
├── pkg-info (see above)
├── AppRun -> chroot/usr/share/...
├── icon.png
└── chroot
	├── usr
	│	└── ...
	└── ... (basically an app installed to a chroot)
```

When an app is installed to this chroot there is a basic skeleton that exists.
That skeloten is the base (debian) installation. Almost all of the root directory folders are
mounted read-only into the chroot.

In an AppBundle ```AppRun``` Can be a link to a .desktop file, a link to an executable, a shell file,
or a script with a proper shebang.